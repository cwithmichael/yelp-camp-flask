{% extends "base.html" %}
{% block title %}Show{% endblock %}
{% block content %}
<link rel="stylesheet" href="{{ url_for('static', filename='css/starability-heart.min.css')}}" type="text/css" media="screen" />
<div class="row">
  <div class="col-6">
    <div class="card mb-3">
      {% for image in camp.images %}
      <img src="{{ image.url }}" class="card-img-top" alt="">
      {% endfor %}
      <div class="card-body">
	<h5 class="card-title">{{ camp.title }}</h5>
	<p class="card-text"> {{ camp.description }} </p>
      </div>
      <ul class="list-group list-group-flush">
	<li class="list-group-item text-muted"> {{ camp.location }}</li>
	<li class="list-group-item"> Submitted by: {{ camp.author.username }}</li>
	<li class="list-group-item">${{ camp.price }}/night</li>
      </ul>
      {% if g.user and camp.author.id == g.user.id %}
      <div class="card-body">
	<a class="card-link btn btn-info" href="/campgrounds/{{ camp.id }}/edit">Edit</a>
	<form class="d-inline" action="/campgrounds/{{ camp.id }}" method="POST">
	  <input type="hidden" name="method" value="delete">
	  <button class="btn btn-danger">Delete</button>
	</form>
      </div> <!-- card-body-->
      {% endif %}
      <div class="card-footer text-muted">
	2 days ago
      </div> <!-- card-footer-->
    </div><!-- card-->
  </div><!-- col -->

  <div class="col-6">
    {% if g.user %}
    <h2>Leave a Review</h2>
    <form action="/campgrounds/{{ camp.id }}/reviews" class="mb-3 validated-form" method="POST" novalidate>
      {{ form.csrf_token }}
      <div class="mb-3">
	<fieldset class="starability-heart">
	  <input type="radio" id="no-rate" class="input-no-rate" name="rating" value="" checked aria-label="No rating." />
	  <input type="radio" id="first-rate1" name="rating" value="1" />
	  <label for="first-rate1" title="Terrible">1 star</label>
	  <input type="radio" id="first-rate2" name="rating" value="2" />
	  <label for="first-rate2" title="Not good">2 stars</label>
	  <input type="radio" id="first-rate3" name="rating" value="3" />
	  <label for="first-rate3" title="Average">3 stars</label>
	  <input type="radio" id="first-rate4" name="rating" value="4" />
	  <label for="first-rate4" title="Very good">4 stars</label>
	  <input type="radio" id="first-rate5" name="rating" value="5" />
	  <label for="first-rate5" title="Amazing">5 stars</label>
	</fieldset>
      </div>
      <div class="mb-3">
	<label class="form-label" for="body">Review Text</label>
	{{ form.body(class_="form-control", id="body", cols=30, rows=3) }}
      </div>
      <div class="valid-feedback">
	Looks Good!
      </div>
      <button class="btn btn-success">Submit</button>
    </form>
    {% endif %}
    {% for review in camp.reviews %}
    <div class="card mb-3">
      <div class="card-body">
	<p class="card-title">Author: {{ review.author.username }}</p>
	<p class="starability-result" data-rating="{{ review. rating }}">
	<p class="card-text">Review: {{ review.body }}</p>
	{% if g.user and review.author.id == g.user.id %}
	<form action="/campgrounds/{{ camp.id }}/reviews/{{ review.id }}" method="POST">
	  <input type="hidden" name="method" value="delete">
	  <button class="btn btn-sm btn-danger">Delete</button>
	</form>
	{% endif %}
      </div>
    </div>
    {% endfor %}
  </div>
</div>
{% endblock %}
